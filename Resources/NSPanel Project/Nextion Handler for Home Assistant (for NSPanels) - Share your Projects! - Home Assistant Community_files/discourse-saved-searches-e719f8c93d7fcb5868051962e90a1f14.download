define("discourse/plugins/discourse-saved-searches/discourse/controllers/preferences-saved-searches",["exports","@ember/controller","@ember/object","discourse/lib/ajax","discourse/lib/ajax-error","discourse/lib/computed","discourse-common/utils/decorators","I18n"],(function(e,s,a,r,t,i,c,l){"use strict"
var o
function n(e,s,a,r,t){var i={}
return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=a.slice().reverse().reduce((function(a,r){return r(e,s,a)||a}),i),t&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(t):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,s,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default=s.default.extend((n(o={savedSearches:null,isSaving:!1,saved:!1,canAddSavedSearch:(0,i.propertyLessThan)("savedSearches.length","siteSettings.max_saved_searches"),savedSearchFrequencyOptions:()=>[{name:l.default.t("saved_searches.frequency_options.immediately"),value:"immediately"},{name:l.default.t("saved_searches.frequency_options.hourly"),value:"hourly"},{name:l.default.t("saved_searches.frequency_options.daily"),value:"daily"},{name:l.default.t("saved_searches.frequency_options.weekly"),value:"weekly"}],addSavedSearch(){this.savedSearches.pushObject({query:"",frequency:"daily"})},removeSavedSearch(e){this.savedSearches.removeObject(e)},save(){this.setProperties({isSaving:!0,saved:!1})
const e=this.savedSearches.filter((e=>!!e.query.trim()))
return(0,r.ajax)(`/u/${this.model.username}/preferences/saved-searches`,{type:"PUT",dataType:"json",data:{searches:e}}).then((()=>this.setProperties({saved:!0,"model.saved_searches":e}))).catch(t.popupAjaxError).finally((()=>this.set("isSaving",!1)))}},"savedSearchFrequencyOptions",[c.default],Object.getOwnPropertyDescriptor(o,"savedSearchFrequencyOptions"),o),n(o,"addSavedSearch",[a.action],Object.getOwnPropertyDescriptor(o,"addSavedSearch"),o),n(o,"removeSavedSearch",[a.action],Object.getOwnPropertyDescriptor(o,"removeSavedSearch"),o),n(o,"save",[a.action],Object.getOwnPropertyDescriptor(o,"save"),o),o))})),define("discourse/plugins/discourse-saved-searches/discourse/discourse-saved-searches-route-map",["exports"],(function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default={resource:"user.preferences",map(){this.route("savedSearches",{path:"/saved-searches"})}}})),define("discourse/plugins/discourse-saved-searches/discourse/initializers/saved-searches",["exports","discourse/lib/plugin-api"],(function(e,s){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default={name:"saved-searches",initialize(){(0,s.withPluginApi)("0.12.0",(e=>{e.replaceIcon("notification.saved_searches.notification","search")}))}}})),define("discourse/plugins/discourse-saved-searches/discourse/routes/preferences-saved-searches",["exports","@ember/service","discourse/routes/restricted-user"],(function(e,s,a){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default=a.default.extend({router:(0,s.inject)(),setupController(e,s){if(!s.can_use_saved_searches)return this.router.transitionTo("preferences.account")
e.setProperties({model:s,savedSearches:s.saved_searches||[]})}})})),define("discourse/plugins/discourse-saved-searches/discourse/templates/connectors/user-preferences-nav/saved-searches",["exports","ember-this-fallback/deprecations-helper","@ember/template-factory"],(function(e,s,a){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default=(0,a.createTemplateFactory)({id:"S9qB5vUV",block:'[[[41,[30,0,["model","can_use_saved_searches"]],[[[1,"  "],[8,[39,1],null,[["@route"],["preferences.savedSearches"]],[["default"],[[[[1,"\\n    "],[1,[28,[35,2],["saved_searches.title"],null]],[1,"\\n  "]],[]]]]],[1,"\\n"]],[]],null],[1,[28,[32,0],["[[\\"The `model` property path was used in the `discourse/plugins/discourse-saved-searches/discourse/templates/connectors/user-preferences-nav/saved-searches.hbs` template without using `this`. This fallback behavior has been deprecated, all properties must be looked up on `this` when used in the template: {{this.model}}\\",false,{\\"id\\":\\"ember-this-fallback.this-property-fallback\\",\\"until\\":\\"n/a\\",\\"for\\":\\"ember-this-fallback\\",\\"url\\":\\"https://deprecations.emberjs.com/v3.x#toc_this-property-fallback\\",\\"since\\":{\\"available\\":\\"0.2.0\\"}}]]"],null]]],[],false,["if","link-to","i18n"]]',moduleName:"discourse/plugins/discourse-saved-searches/discourse/templates/connectors/user-preferences-nav/saved-searches.hbs",scope:()=>[s.default],isStrictMode:!1})})),define("discourse/plugins/discourse-saved-searches/discourse/templates/preferences-saved-searches",["exports","ember-this-fallback/deprecations-helper","@ember/template-factory"],(function(e,s,a){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default=(0,a.createTemplateFactory)({id:"OH7QGdZM",block:'[[[10,0],[14,0,"control-group category-saved-searches"],[12],[1,"\\n  "],[10,"label"],[14,0,"control-label"],[12],[1,[28,[35,0],["saved_searches.title"],null]],[13],[1,"\\n\\n  "],[10,2],[12],[1,[28,[35,0],["saved_searches.description"],[["count"],[[30,0,["siteSettings","max_saved_searches"]]]]]],[13],[1,"\\n\\n"],[42,[28,[37,2],[[28,[37,2],[[30,0,["savedSearches"]]],null]],null],null,[[[1,"    "],[10,0],[14,0,"controls saved-searches-controls saved-search"],[12],[1,"\\n      "],[8,[39,3],null,[["@type","@value"],["text",[30,1,["query"]]]],null],[1,"\\n      "],[8,[39,4],null,[["@content","@valueProperty","@value","@onChange"],[[30,0,["savedSearchFrequencyOptions"]],"value",[30,1,["frequency"]],[28,[37,5],[[30,0],[28,[37,6],[[30,1,["frequency"]]],null]],null]]],null],[1,"\\n      "],[8,[39,7],[[24,0,"remove-saved-search"]],[["@icon","@title","@action"],["trash-alt","saved_searches.remove",[28,[37,5],[[30,0],"removeSavedSearch",[30,1]],null]]],null],[1,"\\n    "],[13],[1,"\\n"]],[1]],[[[1,"    "],[10,0],[14,0,"controls saved-searches-controls"],[12],[1,"\\n      "],[1,[28,[35,0],["saved_searches.none"],null]],[1,"\\n    "],[13],[1,"\\n"]],[]]],[1,"\\n"],[41,[30,0,["canAddSavedSearch"]],[[[1,"    "],[10,0],[14,0,"controls saved-searches-controls"],[12],[1,"\\n      "],[8,[39,7],[[24,0,"add-saved-search"]],[["@icon","@label","@action"],["plus","saved_searches.add",[28,[37,5],[[30,0],"addSavedSearch"],null]]],null],[1,"\\n    "],[13],[1,"\\n"]],[]],null],[13],[1,"\\n\\n"],[8,[39,9],null,[["@model","@action","@saved"],[[30,0],[28,[37,5],[[30,0],"save"],null],[30,0,["saved"]]]],null],[1,[28,[32,0],["[[\\"The `siteSettings` property path was used in the `discourse/plugins/discourse-saved-searches/discourse/templates/preferences-saved-searches.hbs` template without using `this`. This fallback behavior has been deprecated, all properties must be looked up on `this` when used in the template: {{this.siteSettings}}\\",false,{\\"id\\":\\"ember-this-fallback.this-property-fallback\\",\\"until\\":\\"n/a\\",\\"for\\":\\"ember-this-fallback\\",\\"url\\":\\"https://deprecations.emberjs.com/v3.x#toc_this-property-fallback\\",\\"since\\":{\\"available\\":\\"0.2.0\\"}}],[\\"The `savedSearches` property path was used in the `discourse/plugins/discourse-saved-searches/discourse/templates/preferences-saved-searches.hbs` template without using `this`. This fallback behavior has been deprecated, all properties must be looked up on `this` when used in the template: {{this.savedSearches}}\\",false,{\\"id\\":\\"ember-this-fallback.this-property-fallback\\",\\"until\\":\\"n/a\\",\\"for\\":\\"ember-this-fallback\\",\\"url\\":\\"https://deprecations.emberjs.com/v3.x#toc_this-property-fallback\\",\\"since\\":{\\"available\\":\\"0.2.0\\"}}],[\\"The `savedSearchFrequencyOptions` property path was used in the `discourse/plugins/discourse-saved-searches/discourse/templates/preferences-saved-searches.hbs` template without using `this`. This fallback behavior has been deprecated, all properties must be looked up on `this` when used in the template: {{this.savedSearchFrequencyOptions}}\\",false,{\\"id\\":\\"ember-this-fallback.this-property-fallback\\",\\"until\\":\\"n/a\\",\\"for\\":\\"ember-this-fallback\\",\\"url\\":\\"https://deprecations.emberjs.com/v3.x#toc_this-property-fallback\\",\\"since\\":{\\"available\\":\\"0.2.0\\"}}],[\\"The `canAddSavedSearch` property path was used in the `discourse/plugins/discourse-saved-searches/discourse/templates/preferences-saved-searches.hbs` template without using `this`. This fallback behavior has been deprecated, all properties must be looked up on `this` when used in the template: {{this.canAddSavedSearch}}\\",false,{\\"id\\":\\"ember-this-fallback.this-property-fallback\\",\\"until\\":\\"n/a\\",\\"for\\":\\"ember-this-fallback\\",\\"url\\":\\"https://deprecations.emberjs.com/v3.x#toc_this-property-fallback\\",\\"since\\":{\\"available\\":\\"0.2.0\\"}}],[\\"The `saved` property path was used in the `discourse/plugins/discourse-saved-searches/discourse/templates/preferences-saved-searches.hbs` template without using `this`. This fallback behavior has been deprecated, all properties must be looked up on `this` when used in the template: {{this.saved}}\\",false,{\\"id\\":\\"ember-this-fallback.this-property-fallback\\",\\"until\\":\\"n/a\\",\\"for\\":\\"ember-this-fallback\\",\\"url\\":\\"https://deprecations.emberjs.com/v3.x#toc_this-property-fallback\\",\\"since\\":{\\"available\\":\\"0.2.0\\"}}]]"],null]]],["savedSearch"],false,["i18n","each","-track-array","input","combo-box","action","mut","d-button","if","save-controls"]]',moduleName:"discourse/plugins/discourse-saved-searches/discourse/templates/preferences-saved-searches.hbs",scope:()=>[s.default],isStrictMode:!1})}))

//# sourceMappingURL=discourse-saved-searches-9aa4e99ce37ba1006d825bb2a0906d9475a13c8f100a7d03106599d73b132323.map
//!

;
